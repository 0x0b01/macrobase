<mat-toolbar color="accent">
  <div style="padding-left: 20px">
    <button mat-icon-button (click)="updateDisplayType('DataHomepage')"
            style="background-color: lightgray;"
            matTooltip="Go to homepage."
            matTooltipPosition="right">
      <mat-icon svgIcon="home"></mat-icon>
    </button>
  </div>
  <app-data-header style="width: 85%;"></app-data-header>
</mat-toolbar>

<!-- DATA HOMEPAGE -->
<div *ngIf="displayType=='DataHomepage'"
     style="margin-left: 2em; margin-right: 2em; margin-top: 1em">
  <div class="column-small">
    <h1>Config</h1>
    <div class="data-home" style="padding-left: 5px">
      <app-data-home></app-data-home>
    </div>
  </div>

  <div class="column-big">
    <h1>Query</h1>
    <div style="padding-top: 10px">
      <button mat-raised-button color="primary"
              (click)="newQuery()" [disabled]="!isLoaded"
              matTooltip="Create a MacroBase query."
              matTooltipPosition="above">
        New
      </button>
      <button mat-raised-button style="background-color:lightgray"
              (click)="editSelected(-1)" [disabled]="selectedIDs.length != 1"
              matTooltip="Edit a selected query."
              matTooltipPosition="above">
        Edit
      </button>
      <button mat-raised-button style="background-color:lightgray"
              (click)="deleteSelected()" [disabled]="selectedIDs.length == 0"
              matTooltip="Delete selected queries."
              matTooltipPosition="above">
        Delete
      </button>
      &nbsp;&nbsp;&nbsp;&nbsp;
      <button mat-raised-button color="accent"
              (click)="exploreSelected()" [disabled]="selectedIDs.length == 0"
              matTooltip="Explore query results and visualizations."
              matTooltipPosition="above">
        Explore
      </button>

      <br>
      <br>
      <table cellpadding="20" border="1px" width="100%">
        <tr *ngFor="let id of validIDs.reverse()" (click)="selectID(id)"
            [style.background-color]="getSelectedColor(id)" id="summary{{id}}">
          <td class="summary">
            <mat-checkbox [checked]="selectedIDs.includes(id)" [disabled]="true"></mat-checkbox>
            &nbsp;
            <app-query-summary id={{id}}></app-query-summary>
          </td>
        </tr>
      </table>
    </div>
  </div>
</div>

<!-- EXPLORE EXPLANATIONS -->
<div *ngIf="displayType=='Explore'"
     style="margin-left: 2em; margin-right: 2em; margin-top: 1em">
  <div class="column">
    <h1> Explanation </h1>
    <div>
      <button mat-raised-button color="primary" (click)="newQuery()"
              matTooltip="Create a MacroBase query."
              matTooltipPosition="right">
        New
      </button>
    </div>
    <br>
    <div *ngFor="let id of exploreIDs.reverse()">
      <div id="summary{{id}}" class="summary" style="background-color:#c5cae9">
        <app-query-summary id={{id}}></app-query-summary>
        <div style="text-align: right; padding-top: 10px;">
          <button mat-raised-button (click)="editSelected(id)"
                  matTooltip="Edit this query."
                  matTooltipPosition="left">
            Edit
          </button>
        </div>
      </div>
      <div id="cell{{id}}" class="cell">
        <app-cell id={{id}}></app-cell>
      </div>
      <br>
    </div>
  </div>

  <div class="column">
    <h1 style="padding-left: 50px">
      Visualization
    </h1>
    <div style="text-align:center;">
      <div *ngIf="plotIDsByMetric">
        <div *ngFor="let metric of plotIDsByMetric.keys()">
          <h5> Metric: {{metric}} </h5>
          <div *ngFor="let queryID of plotIDsByMetric.get(metric).keys()">
            <div *ngFor="let itemsetID of plotIDsByMetric.get(metric).get(queryID)">
              <app-plot queryID={{queryID}} itemsetID={{itemsetID}}></app-plot>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Messages -->
<div class="footer" *ngIf="displayMessages">
  <app-messages></app-messages>
</div>